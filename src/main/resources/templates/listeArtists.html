<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/menu :: head">

    </head>

    <body>
        <div>

            <div th:replace="fragments/menu :: navbar">
            </div>

            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <h1 th:text="${typeRecherche} ? 'Liste des artistes contenant '+${typeRecherche}: 'Liste de tous les artistes'"></h1>
                        <form action="/artists/new" method="get" >
                            <button type="submit" name="your_name" value="your_value" class="btn btn-primary">Nouvel artiste</button>
                        </form>
                        <table class="table table-hover table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">Nom
                                        <a th:if="${listeArtists.getSort().stream().iterator().next().getDirection().toString()}=='ASC'"
                                              th:href=" ${typeRecherche} ?
                                                     @{/artists
                                                        (
                                                            page=${listeArtists.getNumber()},
                                                            size=${listeArtists.getSize()},
                                                            sortDirection='DESC',
                                                            sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()},
                                                            name=${typeRecherche}
                                                        )
                                                    }
                                                    :
                                                    @{/artists
                                                        (
                                                            page=${listeArtists.getNumber()},
                                                            size=${listeArtists.getSize()},
                                                            sortDirection='DESC',
                                                            sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()}
                                                        )
                                                    }"
                                              class="glyphicon glyphicon-chevron-down"
                                        >
                                        </a>

                                        <a th:if="${listeArtists.getSort().stream().iterator().next().getDirection().toString()}=='DESC'"
                                              th:href=" ${typeRecherche} ?
                                                     @{/artists
                                                        (
                                                            page=${listeArtists.getNumber()},
                                                            size=${listeArtists.getSize()},
                                                            sortDirection='ASC',
                                                            sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()},
                                                            name=${typeRecherche}
                                                        )
                                                    }
                                                    :
                                                    @{/artists
                                                        (
                                                            page=${listeArtists.getNumber()},
                                                            size=${listeArtists.getSize()},
                                                            sortDirection='ASC',
                                                            sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()}
                                                        )
                                                    }"
                                              class="glyphicon glyphicon-chevron-up"
                                        >

                                        </a>
                                    </th>
                                    <th scope="col"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="artist : ${listeArtists}">
                                    <th scope="row" th:text="${artist.name}">nom de l'artiste</th>
                                    <td><a th:href="'/artists/'+${artist.id}" class="btn btn-primary">Détail</a></td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="row">
                            <div class="col-lg-6">
                                <p th:text="${listeArtists.getTotalElements()}==0
                                ?
                                'aucun artiste trouvé'
                                :
                                'Affichage des artistes ' +
                                    ((${listeArtists.getSize()} * ${listeArtists.getNumber()}) + 1 )+
                                    ' à '+
                                    ((${listeArtists.getSize()} * ${listeArtists.getNumber()}) + ${listeArtists.getNumberOfElements()})+
                                    ' sur un total de '+
                                    ${listeArtists.getTotalElements()}">

                                </p>
                            </div>
                            <div class="col-lg-6">
                                <ul class="pagination" th:if="${listeArtists.getTotalElements()}!=0">
                            <!--                class="disabled"-->
                                    <li  th:class="${!listeArtists.isFirst()}?'': 'disabled'">
                                        <a  th:href=" ${typeRecherche} ?
                                         @{/artists
                                            (
                                                page=${listeArtists.previousOrFirstPageable().getPageNumber()},
                                                size=${listeArtists.getSize()},
                                                sortDirection=${listeArtists.getSort().stream().iterator().next().getDirection()},
                                                sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()},
                                                name=${typeRecherche}
                                            )
                                        }
                                        :

                                        @{/artists
                                            (
                                                page=${listeArtists.previousOrFirstPageable().getPageNumber()},
                                                size=${listeArtists.getSize()},
                                                sortDirection=${listeArtists.getSort().stream().iterator().next().getDirection()},
                                                sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()}
                                            )
                                        }">
                                        «
                                        </a>
                                    </li>
                                    <li>

                                        <a>
                                            <form th:href=" ${typeRecherche} ?
                                                        @{/artists
                                                            (
                                                                size=${listeArtists.getSize()},
                                                                sortDirection=${listeArtists.getSort().stream().iterator().next().getDirection()},
                                                                sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()},
                                                                name=${typeRecherche}
                                                            )
                                                        }
                                                        :
                                                        @{/artists
                                                            (
                                                                size=${listeArtists.getSize()},
                                                                sortDirection=${listeArtists.getSort().stream().iterator().next().getDirection()},
                                                                sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()}
                                                            )
                                                        }">
                                                <select name="page" >
                                                    <option
                                                        th:each="numeroDePage : ${listePage}"
                                                        th:value="${numeroDePage}"
                                                        th:selected="${listeArtists.getNumber()}==${numeroDePage}"
                                                    >
                                                        Page [[${numeroDePage}+1]]

                                                    </option>

                                                </select>

                                                <button type="submit" class="glyphicon glyphicon-share-alt"></button>
                                            </form>


                                        </a>
                                    </li>
                                    <li th:class="${!listeArtists.isLast()}?'': 'disabled'">
                                        <a th:href=" ${typeRecherche} ?
                                         @{/artists
                                            (
                                                page=${listeArtists.nextOrLastPageable().getPageNumber()},
                                                size=${listeArtists.getSize()},
                                                sortDirection=${listeArtists.getSort().stream().iterator().next().getDirection()},
                                                sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()},
                                                name=${typeRecherche}
                                            )
                                        }
                                        :

                                        @{/artists
                                            (
                                                page=${listeArtists.nextOrLastPageable().getPageNumber()},
                                                size=${listeArtists.getSize()},
                                                sortDirection=${listeArtists.getSort().stream().iterator().next().getDirection()},
                                                sortProperty=${listeArtists.getSort().stream().iterator().next().getProperty()}
                                            )
                                        }">
                                        »
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

            <!--          <div class="col-lg-6">-->
            <!--            <h2>Détail de l'artiste A Cor Do Som</h2>-->

            <!--            <div class="row">-->
            <!--              <div class="col-lg-12">-->
            <!--                <div class="form-group">-->
            <!--                  <label for="name" class="form-control-label">Nom</label>-->
            <!--                  <input type="text" id="name" class="form-control">-->


            <!--                  <label for="performance" class="form-control-label">Albums</label>-->
            <!--                  <div class="row">-->
            <!--                    <div class="col-lg-10">-->
            <!--                      <div class="list-group">-->
            <!--                        &lt;!&ndash;&ndash;&gt;-->
            <!--                      </div>-->
            <!--                    </div>-->
            <!--                    <div class="col-lg-2 text-center">-->
            <!--                      <div class="list-group text-center">-->
            <!--                        &lt;!&ndash;&ndash;&gt;-->
            <!--                      </div>-->
            <!--                    </div>-->
            <!--                  </div>-->
            <!--                  <div class="row">-->
            <!--                    <div class="col-lg-10">-->
            <!--                      <input type="text" placeholder="Ajouter un album..." class="form-control">-->
            <!--                    </div>-->
            <!--                    <div class="col-lg-2 text-center">-->
            <!--                      <button class="btn-success list-group-item list-group-item-action"><span class="glyphicon glyphicon-plus"></span>-->
            <!--                      </button>-->

            <!--                    </div>-->
            <!--                  </div>-->
            <!--                </div>-->
            <!--              </div>-->
            <!--            </div>-->
            <!--            <div class="row">-->
            <!--              <button disabled="" class="btn btn-primary">Enregistrer</button>-->
            <!--              <button class="btn btn-danger">Supprimer</button>-->
            <!--            </div>-->
            <!--          </div>-->

                </div>
            </div>
        </div>
    </body>
</html>